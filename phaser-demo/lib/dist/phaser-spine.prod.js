"use strict";var spine={radDeg:180/Math.PI,degRad:Math.PI/180,Float32Array:"undefined"==typeof Float32Array?Array:Float32Array,Uint32Array:"undefined"==typeof Uint32Array?Array:Uint32Array,Uint16Array:"undefined"==typeof Uint16Array?Array:Uint16Array};spine.temp=new spine.Float32Array(2),spine.BoneData=function(t,e){this.name=t,this.parent=e},spine.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,inheritScale:!0,inheritRotation:!0},spine.BlendMode={normal:0,additive:1,multiply:2,screen:3},spine.SlotData=function(t,e){this.name=t,this.boneData=e},spine.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,blendMode:spine.BlendMode.normal},spine.IkConstraintData=function(t){this.name=t,this.bones=[]},spine.IkConstraintData.prototype={target:null,bendDirection:1,mix:1},spine.TransformConstraintData=function(t){this.name=t},spine.TransformConstraintData.prototype={bone:null,target:null,translateMix:1,x:0,y:0},spine.Bone=function(t,e,n){this.data=t,this.skeleton=e,this.parent=n,this.setToSetupPose()},spine.Bone.yDown=!1,spine.Bone.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,a:0,b:0,worldX:0,c:0,d:0,worldY:0,worldSignX:1,worldSignY:1,update:function(){this.updateWorldTransform(this.x,this.y,this.rotation,this.scaleX,this.scaleY)},updateWorldTransformWith:function(){this.updateWorldTransform(this.x,this.y,this.rotation,this.scaleX,this.scaleY)},updateWorldTransform:function(t,e,n,i,a){this.appliedRotation=n,this.appliedScaleX=i,this.appliedScaleY=a,n*=spine.degRad;var r=Math.cos(n),s=Math.sin(n),o=r*i,h=-s*a,l=s*i,p=r*a,u=this.parent;if(!u){var f=this.skeleton;return f.flipX&&(t=-t,o=-o,h=-h),f.flipY!=spine.Bone.yDown&&(e=-e,l=-l,p=-p),this.a=o,this.b=h,this.c=l,this.d=p,this.worldX=t,this.worldY=e,this.worldSignX=i<0?-1:1,void(this.worldSignY=a<0?-1:1)}var d=u.a,c=u.b,g=u.c,m=u.d;if(this.worldX=d*t+c*e+u.worldX,this.worldY=g*t+m*e+u.worldY,this.worldSignX=u.worldSignX*(i<0?-1:1),this.worldSignY=u.worldSignY*(a<0?-1:1),this.data.inheritRotation&&this.data.inheritScale)this.a=d*o+c*l,this.b=d*h+c*p,this.c=g*o+m*l,this.d=g*h+m*p;else{if(this.data.inheritRotation){g=c=0,m=d=1;do{n=u.appliedRotation*spine.degRad;var v=d*(r=Math.cos(n))+c*(s=Math.sin(n)),c=d*-s+c*r,d=v;if(v=g*r+m*s,m=g*-s+m*r,g=v,!u.data.inheritRotation)break;u=u.parent}while(u);this.a=d*o+c*l,this.b=d*h+c*p,this.c=g*o+m*l,this.d=g*h+m*p}else if(this.data.inheritScale){g=c=0,m=d=1;do{n=u.appliedRotation*spine.degRad,r=Math.cos(n),s=Math.sin(n);var y=u.appliedScaleX,w=u.appliedScaleY,b=r*y,x=-s*w,A=s*y,S=r*w,v=d*b+c*A;if(c=d*x+c*S,d=v,v=g*b+m*A,m=g*x+m*S,g=v,y<0&&(n=-n),v=d*(r=Math.cos(-n))+c*(s=Math.sin(-n)),c=d*-s+c*r,d=v,v=g*r+m*s,m=g*-s+m*r,g=v,!u.data.inheritScale)break;u=u.parent}while(u);this.a=d*o+c*l,this.b=d*h+c*p,this.c=g*o+m*l,this.d=g*h+m*p}else this.a=o,this.b=h,this.c=l,this.d=p;this.skeleton.flipX&&(this.a=-this.a,this.b=-this.b),this.skeleton.flipY!=spine.Bone.yDown&&(this.c=-this.c,this.d=-this.d)}},setToSetupPose:function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY},getWorldRotationX:function(){return Math.atan2(this.c,this.a)*spine.radDeg},getWorldRotationY:function(){return Math.atan2(this.d,this.b)*spine.radDeg},getWorldScaleX:function(){return Math.sqrt(this.a*this.a+this.b*this.b)*this.worldSignX},getWorldScaleY:function(){return Math.sqrt(this.c*this.c+this.d*this.d)*this.worldSignY},worldToLocal:function(t){var e=t[0]-this.worldX,n=t[1]-this.worldY,i=this.a,a=this.b,r=this.c,s=this.d,o=1/(i*s-a*r);return t[0]=e*s*o-n*a*o,t[1]=n*i*o-e*r*o,t},localToWorld:function(t){var e=t[0],n=t[1];return t[0]=e*this.a+n*this.b+this.worldX,t[1]=e*this.c+n*this.d+this.worldY,t}},spine.Slot=function(t,e){this.data=t,this.bone=e,this.attachmentVertices=new spine.Float32Array,this.setToSetupPose()},spine.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,setAttachment:function(t){this.attachment!=t&&(this.attachment=t,this._attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},setAttachmentTime:function(t){this._attachmentTime=this.bone.skeleton.time-t},getAttachmentTime:function(){return this.bone.skeleton.time-this._attachmentTime},setToSetupPose:function(){var t=this.data;if(this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,t.attachmentName){for(var e=this.bone.skeleton.data.slots,n=0,i=e.length;n<i;n++)if(e[n]==t){this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachmentBySlotIndex(n,t.attachmentName));break}}else this.setAttachment(null)}},spine.IkConstraint=function(t,e){this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.bones=[];for(var n=0,i=t.bones.length;n<i;n++)this.bones[n]=e.findBone(t.bones[n].name);this.target=e.findBone(t.target.name)},spine.IkConstraint.prototype={apply:function(){this.update()},update:function(){var t=this.target,e=this.bones;switch(e.length){case 1:spine.IkConstraint.apply1(e[0],t.worldX,t.worldY,this.mix);break;case 2:spine.IkConstraint.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.mix)}}},spine.IkConstraint.apply1=function(t,e,n,i){var a=t.parent?t.parent.getWorldRotationX():0,r=t.rotation,s=Math.atan2(n-t.worldY,e-t.worldX)*spine.radDeg-a;t.worldSignX!=t.worldSignY!=(t.skeleton.flipX!=(t.skeleton.flipY!=spine.Bone.yDown))&&(s=360-s),180<s?s-=360:s<-180&&(s+=360),t.updateWorldTransform(t.x,t.y,r+(s-r)*i,t.appliedScaleX,t.appliedScaleY)},spine.IkConstraint.apply2=function(t,e,n,i,a,r){if(0!=r){var s,o,h=t.x,l=t.y,p=t.appliedScaleX,u=t.appliedScaleY,f=p<0?(p=-p,s=180,-1):(s=0,1);u<0&&(u=-u,f=-f);var d=e.x,c=e.y,g=e.appliedScaleX,m=Math.abs(p-u)<=1e-4;m||0==c||(e.worldX=t.a*d+t.worldX,e.worldY=t.c*d+t.worldY,c=0),o=g<0?(g=-g,180):0;var v,y,w,b,x,A,S,k,T=t.parent;k=T?(I=T.a,V=T.b,v=T.c,y=1/(I*(Y=T.d)-V*v),x=((q=n-(w=T.worldX))*Y-(G=i-(b=T.worldY))*V)*y-h,A=(G*I-q*v)*y-l,S=((q=e.worldX-w)*Y-(G=e.worldY-b)*V)*y-h,(G*I-q*v)*y-l):(x=n-h,A=i-l,S=e.worldX-h,e.worldY-l);var C,M=Math.sqrt(S*S+k*k),P=e.data.length*g;t:if(m){var O=(x*x+A*A-M*M-(P*=p)*P)/(2*M*P);O<-1?O=-1:1<O&&(O=1),C=Math.acos(O)*a;var I=M+P*O,X=P*Math.sin(C),F=Math.atan2(A*I-x*X,x*I+A*X)}else{var Y,I=p*P,V=u*P,D=Math.atan2(A,x),U=I*I,W=V*V,B=x*x+A*A,E=W*(M*M)+U*B-U*W,R=-2*W*M,L=W-U;if(0<=(Y=R*R-4*L*E)){var N=Math.sqrt(Y);R<0&&(N=-N);var H=(N=-(R+N)/2)/L,_=E/N,j=Math.abs(H)<Math.abs(_)?H:_;if(j*j<=B){var G=Math.sqrt(B-j*j)*a;F=D-Math.atan2(G,j),C=Math.atan2(G/u,(j-M)/p);break t}}var q,J=0,K=Number.MAX_VALUE,$=0,z=0,Q=0,Z=0,tt=0,et=0,nt=(q=M+I)*q;Z<nt&&(Q=0,Z=nt,tt=q),(nt=(q=M-I)*q)<K&&(J=Math.PI,K=nt,$=q);var it=Math.acos(-I*M/(U-W));(nt=(q=I*Math.cos(it)+M)*q+(G=V*Math.sin(it))*G)<K&&(J=it,K=nt,$=q,z=G),Z<nt&&(Q=it,Z=nt,tt=q,et=G),C=B<=(K+Z)/2?(F=D-Math.atan2(z*a,$),J*a):(F=D-Math.atan2(et*a,tt),Q*a)}var at=Math.atan2(c,d)*f;180<(F=(F-at)*spine.radDeg+s)?F-=360:F<-180&&(F+=360),180<(C=(C+at)*spine.radDeg*f+o)?C-=360:C<-180&&(C+=360);var rt=t.rotation;t.updateWorldTransform(h,l,rt+(F-rt)*r,t.appliedScaleX,t.appliedScaleY),rt=e.rotation,e.updateWorldTransform(d,c,rt+(C-rt)*r,e.appliedScaleX,e.appliedScaleY)}},spine.TransformConstraint=function(t,e){this.data=t,this.translateMix=t.translateMix,this.x=t.x,this.y=t.y,this.bone=e.findBone(t.bone.name),this.target=e.findBone(t.target.name)},spine.TransformConstraint.prototype={apply:function(){this.update()},update:function(){var t,e,n=this.translateMix;0<n&&((t=spine.temp)[0]=x,t[1]=y,this.target.localToWorld(t),(e=this.bone).worldX+=(t[0]-e.worldX)*n,e.worldY+=(t[1]-e.worldY)*n)}},spine.Skin=function(t){this.name=t,this.attachments={}},spine.Skin.prototype={addAttachment:function(t,e,n){this.attachments[t+":"+e]=n},getAttachment:function(t,e){return this.attachments[t+":"+e]},_attachAll:function(t,e){for(var n in e.attachments){var i,a=n.indexOf(":"),r=parseInt(n.substring(0,a)),s=n.substring(a+1),o=t.slots[r];!o.attachment||o.attachment.name!=s||(i=this.getAttachment(r,s))&&o.setAttachment(i)}}},spine.Animation=function(t,e,n){this.name=t,this.timelines=e,this.duration=n},spine.Animation.prototype={apply:function(t,e,n,i,a){i&&0!=this.duration&&(n%=this.duration,0<e&&(e%=this.duration));for(var r=this.timelines,s=0,o=r.length;s<o;s++)r[s].apply(t,e,n,a,1)},mix:function(t,e,n,i,a,r){i&&0!=this.duration&&(n%=this.duration,0<e&&(e%=this.duration));for(var s=this.timelines,o=0,h=s.length;o<h;o++)s[o].apply(t,e,n,a,r)}},spine.Animation.binarySearch=function(t,e,n){var i=0,a=Math.floor(t.length/n)-2;if(!a)return n;for(var r=a>>>1;;){if(t[(r+1)*n]<=e?i=r+1:a=r,i==a)return(i+1)*n;r=i+a>>>1}},spine.Animation.binarySearch1=function(t,e){var n=0,i=t.length-2;if(!i)return 1;for(var a=i>>>1;;){if(t[a+1]<=e?n=a+1:i=a,n==i)return n+1;a=n+i>>>1}},spine.Animation.linearSearch=function(t,e,n){for(var i=0,a=t.length-n;i<=a;i+=n)if(t[i]>e)return i;return-1},spine.Curves=function(t){var e=19*(t-1);this.curves=new spine.Float32Array(e),this.curves.length=e},spine.Curves.prototype={setLinear:function(t){this.curves[19*t]=0},setStepped:function(t){this.curves[19*t]=1},setCurve:function(t,e,n,i,a){var r=.1*.1*.1,s=6*r,o=2*-e+i,h=2*-n+a,l=3*(e-i)+1,p=3*(n-a)+1,u=e*(3*.1)+o*(.1*.1*3)+l*r,f=n*(3*.1)+h*(.1*.1*3)+p*r,d=o*(.1*.1*6)+l*s,c=h*(.1*.1*6)+p*s,g=l*s,m=p*s,v=19*t,y=this.curves;y[v++]=2;for(var w=u,b=f,x=v+19-1;v<x;v+=2)y[v]=w,y[v+1]=b,u+=d,f+=c,d+=g,c+=m,w+=u,b+=f},getCurvePercent:function(t,e){e=e<0?0:1<e?1:e;var n=this.curves,i=19*t,a=n[i];if(0===a)return e;if(1==a)return 0;for(var r=0,s=++i,o=i+19-1;i<o;i+=2)if(e<=(r=n[i])){var h,l=i==s?h=0:(h=n[i-2],n[i-1]);return l+(n[i+1]-l)*(e-h)/(r-h)}var p=n[i-1];return p+(1-p)*(e-r)/(1-r)}},spine.RotateTimeline=function(t){this.curves=new spine.Curves(t),this.frames=new spine.Float32Array(2*t),this.frames.length=2*t},spine.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,n){t*=2,this.frames[t]=e,this.frames[t+1]=n},apply:function(t,e,n,i,a){var r=this.frames;if(!(n<r[0])){var s=t.bones[this.boneIndex];if(n>=r[r.length-2]){for(var o=s.data.rotation+r[r.length-1]-s.rotation;180<o;)o-=360;for(;o<-180;)o+=360;s.rotation+=o*a}else{for(var h=spine.Animation.binarySearch(r,n,2),l=r[h-1],p=r[h],u=1-(n-p)/(r[h-2]-p),u=this.curves.getCurvePercent(h/2-1,u),o=r[h+1]-l;180<o;)o-=360;for(;o<-180;)o+=360;for(o=s.data.rotation+(l+o*u)-s.rotation;180<o;)o-=360;for(;o<-180;)o+=360;s.rotation+=o*a}}}},spine.TranslateTimeline=function(t){this.curves=new spine.Curves(t),this.frames=new spine.Float32Array(3*t),this.frames.length=3*t},spine.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,n,i){t*=3,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=i},apply:function(t,e,n,i,a){var r=this.frames;if(!(n<r[0])){var s=t.bones[this.boneIndex];if(n>=r[r.length-3])return s.x+=(s.data.x+r[r.length-2]-s.x)*a,void(s.y+=(s.data.y+r[r.length-1]-s.y)*a);var o=spine.Animation.binarySearch(r,n,3),h=r[o-2],l=r[o-1],p=r[o],u=1-(n-p)/(r[o+-3]-p),u=this.curves.getCurvePercent(o/3-1,u);s.x+=(s.data.x+h+(r[o+1]-h)*u-s.x)*a,s.y+=(s.data.y+l+(r[o+2]-l)*u-s.y)*a}}},spine.ScaleTimeline=function(t){this.curves=new spine.Curves(t),this.frames=new spine.Float32Array(3*t),this.frames.length=3*t},spine.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,n,i){t*=3,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=i},apply:function(t,e,n,i,a){var r=this.frames;if(!(n<r[0])){var s=t.bones[this.boneIndex];if(n>=r[r.length-3])return s.scaleX+=(s.data.scaleX*r[r.length-2]-s.scaleX)*a,void(s.scaleY+=(s.data.scaleY*r[r.length-1]-s.scaleY)*a);var o=spine.Animation.binarySearch(r,n,3),h=r[o-2],l=r[o-1],p=r[o],u=1-(n-p)/(r[o+-3]-p),u=this.curves.getCurvePercent(o/3-1,u);s.scaleX+=(s.data.scaleX*(h+(r[o+1]-h)*u)-s.scaleX)*a,s.scaleY+=(s.data.scaleY*(l+(r[o+2]-l)*u)-s.scaleY)*a}}},spine.ColorTimeline=function(t){this.curves=new spine.Curves(t),this.frames=new spine.Float32Array(5*t),this.frames.length=5*t},spine.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(t,e,n,i,a,r){t*=5,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=i,this.frames[t+3]=a,this.frames[t+4]=r},apply:function(t,e,n,i,a){var r,s,o,h,l,p,u,f,d,c,g,m,v,y=this.frames;n<y[0]||(l=n>=y[y.length-5]?(s=y[(r=y.length-1)-3],o=y[r-2],h=y[r-1],y[r]):(u=y[(p=spine.Animation.binarySearch(y,n,5))-4],f=y[p-3],d=y[p-2],c=y[p-1],m=1-(n-(g=y[p]))/(y[p-5]-g),m=this.curves.getCurvePercent(p/5-1,m),s=u+(y[p+1]-u)*m,o=f+(y[p+2]-f)*m,h=d+(y[p+3]-d)*m,c+(y[p+4]-c)*m),v=t.slots[this.slotIndex],a<1?(v.r+=(s-v.r)*a,v.g+=(o-v.g)*a,v.b+=(h-v.b)*a,v.a+=(l-v.a)*a):(v.r=s,v.g=o,v.b=h,v.a=l))}},spine.AttachmentTimeline=function(t){this.curves=new spine.Curves(t),this.frames=new spine.Float32Array(t),this.frames.length=t,this.attachmentNames=[],this.attachmentNames.length=t},spine.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(t,e,n){this.frames[t]=e,this.attachmentNames[t]=n},apply:function(t,e,n){var i,a,r=this.frames;n<r[0]?n<e&&this.apply(t,e,Number.MAX_VALUE,null,0):(n<e&&(e=-1),r[i=n>=r[r.length-1]?r.length-1:spine.Animation.binarySearch1(r,n)-1]<e||(a=this.attachmentNames[i],t.slots[this.slotIndex].setAttachment(a?t.getAttachmentBySlotIndex(this.slotIndex,a):null)))}},spine.EventTimeline=function(t){this.frames=new spine.Float32Array(t),this.frames.length=t,this.events=[],this.events.length=t},spine.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(t,e){this.frames[t]=e.time,this.events[t]=e},apply:function(t,e,n,i,a){if(i){var r,s=this.frames,o=s.length;if(n<e)this.apply(t,e,Number.MAX_VALUE,i,a),e=-1;else if(e>=s[o-1])return;if(!(n<s[0])){if(e<s[0])r=0;else for(var h=s[r=spine.Animation.binarySearch1(s,e)];0<r&&s[r-1]==h;)r--;for(var l=this.events;r<o&&n>=s[r];r++)i[i.length]=l[r]}}}},spine.DrawOrderTimeline=function(t){this.frames=new spine.Float32Array(t),this.frames.length=t,this.drawOrders=[],this.drawOrders.length=t},spine.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(t,e,n){this.frames[t]=e,this.drawOrders[t]=n},apply:function(t,e,n){var i=this.frames;if(!(n<i[0])){var a=n>=i[i.length-1]?i.length-1:spine.Animation.binarySearch1(i,n)-1,r=t.drawOrder,s=t.slots,o=this.drawOrders[a];if(o)for(h=0,l=o.length;h<l;h++)r[h]=t.slots[o[h]];else for(var h=0,l=s.length;h<l;h++)r[h]=s[h]}}},spine.FfdTimeline=function(t){this.curves=new spine.Curves(t),this.frames=new spine.Float32Array(t),this.frames.length=t,this.frameVertices=[],this.frameVertices.length=t},spine.FfdTimeline.prototype={slotIndex:0,attachment:0,getFrameCount:function(){return this.frames.length},setFrame:function(t,e,n){this.frames[t]=e,this.frameVertices[t]=n},apply:function(t,e,n,i,a){var r=t.slots[this.slotIndex],s=r.attachment;if(s&&(s==this.attachment||s.inheritFFD&&s.parentMesh==this.attachment)){var o=this.frames;if(!(n<o[0])){var h=this.frameVertices,l=h[0].length,p=r.attachmentVertices;if(p.length!=l&&(r.attachmentVertices=p=new spine.Float32Array(l),a=1),n>=o[o.length-1]){var u=h[o.length-1];if(a<1)for(var f=0;f<l;f++)p[f]+=(u[f]-p[f])*a;else for(f=0;f<l;f++)p[f]=u[f]}else{var d=spine.Animation.binarySearch1(o,n),c=o[d],g=1-(n-c)/(o[d-1]-c),g=this.curves.getCurvePercent(d-1,g<0?0:1<g?1:g),m=h[d-1],v=h[d];if(a<1)for(f=0;f<l;f++){var y=m[f];p[f]+=(y+(v[f]-y)*g-p[f])*a}else for(f=0;f<l;f++){y=m[f];p[f]=y+(v[f]-y)*g}}}}}},spine.IkConstraintTimeline=function(t){this.curves=new spine.Curves(t),this.frames=new spine.Float32Array(3*t),this.frames.length=3*t},spine.IkConstraintTimeline.prototype={ikConstraintIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,n,i){t*=3,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=i},apply:function(t,e,n,i,a){var r=this.frames;if(!(n<r[0])){var s=t.ikConstraints[this.ikConstraintIndex];if(n>=r[r.length-3])return s.mix+=(r[r.length-2]-s.mix)*a,void(s.bendDirection=r[r.length-1]);var o=spine.Animation.binarySearch(r,n,3),h=r[o+-2],l=r[o],p=1-(n-l)/(r[o+-3]-l),p=this.curves.getCurvePercent(o/3-1,p),u=h+(r[o+1]-h)*p;s.mix+=(u-s.mix)*a,s.bendDirection=r[o+-1]}}},spine.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.events=[],this.animations=[],this.ikConstraints=[],this.transformConstraints=[]},spine.SkeletonData.prototype={name:null,defaultSkin:null,width:0,height:0,version:null,hash:null,findBone:function(t){for(var e=this.bones,n=0,i=e.length;n<i;n++)if(e[n].name==t)return e[n];return null},findBoneIndex:function(t){for(var e=this.bones,n=0,i=e.length;n<i;n++)if(e[n].name==t)return n;return-1},findSlot:function(t){for(var e=this.slots,n=0,i=e.length;n<i;n++)if(e[n].name==t)return e[n];return null},findSlotIndex:function(t){for(var e=this.slots,n=0,i=e.length;n<i;n++)if(e[n].name==t)return n;return-1},findSkin:function(t){for(var e=this.skins,n=0,i=e.length;n<i;n++)if(e[n].name==t)return e[n];return null},findEvent:function(t){for(var e=this.events,n=0,i=e.length;n<i;n++)if(e[n].name==t)return e[n];return null},findAnimation:function(t){for(var e=this.animations,n=0,i=e.length;n<i;n++)if(e[n].name==t)return e[n];return null},findIkConstraint:function(t){for(var e=this.ikConstraints,n=0,i=e.length;n<i;n++)if(e[n].name==t)return e[n];return null},findTransformConstraints:function(t){for(var e=this.transformConstraints,n=0,i=e.length;n<i;n++)if(e[n].name==t)return e[n];return null}},spine.Skeleton=function(t){this.data=t,this.bones=[];for(var e=0,n=t.bones.length;e<n;e++){var i=t.bones[e],a=i.parent?this.bones[t.bones.indexOf(i.parent)]:null;this.bones[e]=new spine.Bone(i,this,a)}this.slots=[],this.drawOrder=[];for(e=0,n=t.slots.length;e<n;e++){var r=t.slots[e],s=this.bones[t.bones.indexOf(r.boneData)],o=new spine.Slot(r,s);this.slots[e]=o,this.drawOrder[e]=o}this.ikConstraints=[];for(e=0,n=t.ikConstraints.length;e<n;e++)this.ikConstraints[e]=new spine.IkConstraint(t.ikConstraints[e],this);this.transformConstraints=[];for(e=0,n=t.transformConstraints.length;e<n;e++)this.transformConstraints[e]=new spine.TransformConstraint(t.transformConstraints[e],this);this.cache=[],this.updateCache()},spine.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateCache:function(){for(var t=this.bones,e=this.cache,n=this.ikConstraints,i=this.transformConstraints,a=n.length,r=i.length,s=e.length=0,o=t.length;s<o;s++){var h=t[s];e[e.length]=h;for(var l=0;l<a;l++){var p=n[l];if(h==p.bones[p.bones.length-1]){e[e.length]=p;break}}}for(s=0;s<r;s++)for(var u=i[s],l=e.length-1;0<=l;l--){var f=e[l];if(f==u.bone||f==u.target){e.splice(l+1,0,u);break}}},updateWorldTransform:function(){for(var t=this.cache,e=0,n=t.length;e<n;e++)t[e].update()},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].setToSetupPose();for(var i=this.ikConstraints,e=0,n=i.length;e<n;e++){(a=i[e]).bendDirection=a.data.bendDirection,a.mix=a.data.mix}for(var a,r=this.transformConstraints,e=0,n=r.length;e<n;e++){(a=r[e]).translateMix=a.data.translateMix,a.x=a.data.x,a.y=a.data.y}},setSlotsToSetupPose:function(){for(var t=this.slots,e=this.drawOrder,n=0,i=t.length;n<i;n++)e[n]=t[n],t[n].setToSetupPose(n)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(t){for(var e=this.bones,n=0,i=e.length;n<i;n++)if(e[n].data.name==t)return e[n];return null},findBoneIndex:function(t){for(var e=this.bones,n=0,i=e.length;n<i;n++)if(e[n].data.name==t)return n;return-1},findSlot:function(t){for(var e=this.slots,n=0,i=e.length;n<i;n++)if(e[n].data.name==t)return e[n];return null},findSlotIndex:function(t){for(var e=this.slots,n=0,i=e.length;n<i;n++)if(e[n].data.name==t)return n;return-1},setSkinByName:function(t){var e=this.data.findSkin(t);if(!e)throw"Skin not found: "+t;this.setSkin(e)},setSkin:function(t){if(t)if(this.skin)t._attachAll(this,this.skin);else for(var e=this.slots,n=0,i=e.length;n<i;n++){var a,r=e[n],s=r.data.attachmentName;!s||(a=t.getAttachment(n,s))&&r.setAttachment(a)}this.skin=t},getAttachmentBySlotName:function(t,e){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(t),e)},getAttachmentBySlotIndex:function(t,e){if(this.skin){var n=this.skin.getAttachment(t,e);if(n)return n}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},setAttachment:function(t,e){for(var n=this.slots,i=0,a=n.length;i<a;i++){var r=n[i];if(r.data.name==t){var s=null;if(e&&!(s=this.getAttachmentBySlotIndex(i,e)))throw"Attachment not found: "+e+", for slot: "+t;return void r.setAttachment(s)}}throw"Slot not found: "+t},findIkConstraint:function(t){for(var e=this.ikConstraints,n=0,i=e.length;n<i;n++)if(e[n].data.name==t)return e[n];return null},findTransformConstraint:function(t){for(var e=this.transformConstraints,n=0,i=e.length;n<i;n++)if(e[n].data.name==t)return e[n];return null},update:function(t){this.time+=t}},spine.EventData=function(t){this.name=t},spine.EventData.prototype={intValue:0,floatValue:0,stringValue:null},spine.Event=function(t,e){this.time=t,this.data=e},spine.Event.prototype={intValue:0,floatValue:0,stringValue:null},spine.AttachmentType={region:0,boundingbox:1,mesh:2,weightedmesh:3,linkedmesh:4,weightedlinkedmesh:5},spine.RegionAttachment=function(t){this.name=t,this.offset=new spine.Float32Array(8),this.offset.length=8,this.uvs=new spine.Float32Array(8),this.uvs.length=8},spine.RegionAttachment.prototype={type:spine.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(t,e,n,i,a){var r=this.uvs;a?(r[2]=t,r[3]=i,r[4]=t,r[5]=e,r[6]=n,r[7]=e,r[0]=n,r[1]=i):(r[0]=t,r[1]=i,r[2]=t,r[3]=e,r[4]=n,r[5]=e,r[6]=n,r[7]=i)},updateOffset:function(){var t=this.width/this.regionOriginalWidth*this.scaleX,e=this.height/this.regionOriginalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.regionOffsetX*t,i=-this.height/2*this.scaleY+this.regionOffsetY*e,a=n+this.regionWidth*t,r=i+this.regionHeight*e,s=this.rotation*spine.degRad,o=Math.cos(s),h=Math.sin(s),l=n*o+this.x,p=n*h,u=i*o+this.y,f=i*h,d=a*o+this.x,c=a*h,g=r*o+this.y,m=r*h,v=this.offset;v[0]=l-f,v[1]=u+p,v[2]=l-m,v[3]=g+p,v[4]=d-m,v[5]=g+c,v[6]=d-f,v[7]=u+c},computeVertices:function(t,e,n,i){t+=n.worldX,e+=n.worldY;var a=n.a,r=n.b,s=n.c,o=n.d,h=this.offset;i[0]=h[0]*a+h[1]*r+t,i[1]=h[0]*s+h[1]*o+e,i[2]=h[2]*a+h[3]*r+t,i[3]=h[2]*s+h[3]*o+e,i[4]=h[4]*a+h[5]*r+t,i[5]=h[4]*s+h[5]*o+e,i[6]=h[6]*a+h[7]*r+t,i[7]=h[6]*s+h[7]*o+e}},spine.MeshAttachment=function(t){this.name=t},spine.MeshAttachment.prototype={type:spine.AttachmentType.mesh,vertices:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,inheritFFD:!0,parentMesh:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var t=this.regionU2-this.regionU,e=this.regionV2-this.regionV,n=this.regionUVs.length;if(this.uvs&&this.uvs.length==n||(this.uvs=new spine.Float32Array(n)),this.regionRotate)for(var i=0;i<n;i+=2)this.uvs[i]=this.regionU+this.regionUVs[i+1]*t,this.uvs[i+1]=this.regionV+e-this.regionUVs[i]*e;else for(i=0;i<n;i+=2)this.uvs[i]=this.regionU+this.regionUVs[i]*t,this.uvs[i+1]=this.regionV+this.regionUVs[i+1]*e},computeWorldVertices:function(t,e,n,i){var a=n.bone;t+=a.worldX,e+=a.worldY;var r=a.a,s=a.b,o=a.c,h=a.d,l=this.vertices,p=l.length;n.attachmentVertices.length==p&&(l=n.attachmentVertices);for(var u=0;u<p;u+=2){var f=l[u],d=l[u+1];i[u]=f*r+d*s+t,i[u+1]=f*o+d*h+e}},setParentMesh:function(t){(this.parentMesh=t)&&(this.vertices=t.vertices,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.edges=t.edges,this.width=t.width,this.height=t.height)}},spine.WeightedMeshAttachment=function(t){this.name=t},spine.WeightedMeshAttachment.prototype={type:spine.AttachmentType.weightedmesh,bones:null,weights:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,inheritFFD:!0,parentMesh:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var t=this.regionU2-this.regionU,e=this.regionV2-this.regionV,n=this.regionUVs.length;if(this.uvs&&this.uvs.length==n||(this.uvs=new spine.Float32Array(n)),this.regionRotate)for(var i=0;i<n;i+=2)this.uvs[i]=this.regionU+this.regionUVs[i+1]*t,this.uvs[i+1]=this.regionV+e-this.regionUVs[i]*e;else for(i=0;i<n;i+=2)this.uvs[i]=this.regionU+this.regionUVs[i]*t,this.uvs[i+1]=this.regionV+this.regionUVs[i+1]*e},computeWorldVertices:function(t,e,n,i){var a,r,s,o,h,l,p,u=n.bone.skeleton.bones,f=this.weights,d=this.bones,c=0,g=0,m=0,v=0,y=d.length;if(n.attachmentVertices.length)for(var w=n.attachmentVertices;g<y;c+=2){for(s=r=0,a=d[g++]+g;g<a;g++,m+=3,v+=2)o=u[d[g]],h=f[m]+w[v],l=f[m+1]+w[v+1],p=f[m+2],r+=(h*o.a+l*o.b+o.worldX)*p,s+=(h*o.c+l*o.d+o.worldY)*p;i[c]=r+t,i[c+1]=s+e}else for(;g<y;c+=2){for(s=r=0,a=d[g++]+g;g<a;g++,m+=3)o=u[d[g]],h=f[m],l=f[m+1],p=f[m+2],r+=(h*o.a+l*o.b+o.worldX)*p,s+=(h*o.c+l*o.d+o.worldY)*p;i[c]=r+t,i[c+1]=s+e}},setParentMesh:function(t){(this.parentMesh=t)&&(this.bones=t.bones,this.weights=t.weights,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.edges=t.edges,this.width=t.width,this.height=t.height)}},spine.BoundingBoxAttachment=function(t){this.name=t,this.vertices=new spine.Float32Array},spine.BoundingBoxAttachment.prototype={type:spine.AttachmentType.boundingbox,computeWorldVertices:function(t,e,n,i){t+=n.worldX,e+=n.worldY;for(var a=n.a,r=n.b,s=n.c,o=n.d,h=this.vertices,l=0,p=h.length;l<p;l+=2){var u=h[l],f=h[l+1];i[l]=u*a+f*r+t,i[l+1]=u*s+f*o+e}}},spine.AnimationStateData=function(t){this.skeletonData=t,this.animationToMixTime={}},spine.AnimationStateData.prototype={defaultMix:0,setMixByName:function(t,e,n){var i=this.skeletonData.findAnimation(t);if(!i)throw"Animation not found: "+t;var a=this.skeletonData.findAnimation(e);if(!a)throw"Animation not found: "+e;this.setMix(i,a,n)},setMix:function(t,e,n){this.animationToMixTime[t.name+":"+e.name]=n},getMix:function(t,e){var n=t.name+":"+e.name;return this.animationToMixTime.hasOwnProperty(n)?this.animationToMixTime[n]:this.defaultMix}},spine.TrackEntry=function(){},spine.TrackEntry.prototype={next:null,previous:null,animation:null,loop:!1,delay:0,time:0,lastTime:-1,endTime:0,timeScale:1,mixTime:0,mixDuration:0,mix:1,onStart:null,onEnd:null,onComplete:null,onEvent:null},spine.AnimationState=function(t){this.data=t,this.tracks=[],this.events=[]},spine.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(t){t*=this.timeScale;for(var e=0;e<this.tracks.length;e++){var n,i,a=this.tracks[e];a&&(a.time+=t*a.timeScale,a.previous&&(n=t*a.previous.timeScale,a.previous.time+=n,a.mixTime+=n),(i=a.next)?(i.time=a.lastTime-i.delay,0<=i.time&&this.setCurrent(e,i)):!a.loop&&a.lastTime>=a.endTime&&this.clearTrack(e))}},apply:function(t){for(var e=0;e<this.tracks.length;e++){var n=this.tracks[e];if(n){this.events.length=0;var i=n.time,a=n.lastTime,r=n.endTime,s=n.loop;!s&&r<i&&(i=r);var o,h,l=n.previous;l?(o=l.time,!l.loop&&o>l.endTime&&(o=l.endTime),l.animation.apply(t,o,o,l.loop,null),1<=(h=n.mixTime/n.mixDuration*n.mix)&&(h=1,n.previous=null),n.animation.mix(t,n.lastTime,i,s,this.events,h)):1==n.mix?n.animation.apply(t,n.lastTime,i,s,this.events):n.animation.mix(t,n.lastTime,i,s,this.events,n.mix);for(var p,u=0,f=this.events.length;u<f;u++){var d=this.events[u];n.onEvent&&n.onEvent(e,d),this.onEvent&&this.onEvent(e,d)}(s?i%r<a%r:a<r&&r<=i)&&(p=Math.floor(i/r),n.onComplete&&n.onComplete(e,p),this.onComplete&&this.onComplete(e,p)),n.lastTime=n.time}}},clearTracks:function(){for(var t=0,e=this.tracks.length;t<e;t++)this.clearTrack(t);this.tracks.length=0},clearTrack:function(t){var e;t>=this.tracks.length||(e=this.tracks[t])&&(e.onEnd&&e.onEnd(t),this.onEnd&&this.onEnd(t),this.tracks[t]=null)},_expandToIndex:function(t){if(t<this.tracks.length)return this.tracks[t];for(;t>=this.tracks.length;)this.tracks[this.tracks.length]=null;return null},setCurrent:function(t,e){var n,i=this._expandToIndex(t);i&&(n=i.previous,i.previous=null,i.onEnd&&i.onEnd(t),this.onEnd&&this.onEnd(t),e.mixDuration=this.data.getMix(i.animation,e.animation),0<e.mixDuration&&(e.mixTime=0,n&&i.mixTime/i.mixDuration<.5?e.previous=n:e.previous=i)),(this.tracks[t]=e).onStart&&e.onStart(t),this.onStart&&this.onStart(t)},setAnimationByName:function(t,e,n){var i=this.data.skeletonData.findAnimation(e);if(!i)throw"Animation not found: "+e;return this.setAnimation(t,i,n)},setAnimation:function(t,e,n){var i=new spine.TrackEntry;return i.animation=e,i.loop=n,i.endTime=e.duration,this.setCurrent(t,i),i},addAnimationByName:function(t,e,n,i){var a=this.data.skeletonData.findAnimation(e);if(!a)throw"Animation not found: "+e;return this.addAnimation(t,a,n,i)},addAnimation:function(t,e,n,i){var a=new spine.TrackEntry;a.animation=e,a.loop=n,a.endTime=e.duration;var r=this._expandToIndex(t);if(r){for(;r.next;)r=r.next;r.next=a}else this.tracks[t]=a;return i<=0&&(r?i+=r.endTime-this.data.getMix(r.animation,e):i=0),a.delay=i,a},getCurrent:function(t){return t>=this.tracks.length?null:this.tracks[t]}},spine.SkeletonJson=function(t){this.attachmentLoader=t,this.linkedMeshes=[]},spine.SkeletonJson.prototype={scale:1,readSkeletonData:function(t,e){var n=new spine.SkeletonData;n.name=e;var i=t.skeleton;i&&(n.hash=i.hash,n.version=i.spine,n.width=i.width||0,n.height=i.height||0);for(var a=0,r=(l=t.bones).length;a<r;a++){var s=l[a],o=null;if(s.parent&&!(o=n.findBone(s.parent)))throw"Parent bone not found: "+s.parent;(w=new spine.BoneData(s.name,o)).length=(s.length||0)*this.scale,w.x=(s.x||0)*this.scale,w.y=(s.y||0)*this.scale,w.rotation=s.rotation||0,w.scaleX=s.hasOwnProperty("scaleX")?s.scaleX:1,w.scaleY=s.hasOwnProperty("scaleY")?s.scaleY:1,w.inheritScale=!s.hasOwnProperty("inheritScale")||s.inheritScale,w.inheritRotation=!s.hasOwnProperty("inheritRotation")||s.inheritRotation,n.bones[a]=w}var h=t.ik;if(h)for(a=0,r=h.length;a<r;a++){for(var l,p=h[a],u=new spine.IkConstraintData(p.name),f=0,d=(l=p.bones).length;f<d;f++){var c=n.findBone(l[f]);if(!c)throw"IK bone not found: "+l[f];u.bones[f]=c}if(u.target=n.findBone(p.target),!u.target)throw"Target bone not found: "+p.target;u.bendDirection=!p.hasOwnProperty("bendPositive")||p.bendPositive?1:-1,u.mix=p.hasOwnProperty("mix")?p.mix:1,n.ikConstraints[a]=u}var g=t.transform;if(g)for(a=0,r=g.length;a<r;a++){var m=g[a],v=new spine.TransformConstraintData(m.name);if(v.bone=n.findBone(m.bone),!v.bone)throw"Bone not found: "+m.bone;if(v.target=n.findBone(m.target),!v.target)throw"Target bone not found: "+m.target;v.mix=m.hasOwnProperty("translateMix")?p.translateMix:1,v.x=(m.x||0)*this.scale,v.y=(m.y||0)*this.scale,n.transformConstraints[a]=v}for(var y=t.slots,a=0,r=y.length;a<r;a++){var w,b=y[a];if(!(w=n.findBone(b.bone)))throw"Slot bone not found: "+b.bone;var x=new spine.SlotData(b.name,w),A=b.color;A&&(x.r=this.toColor(A,0),x.g=this.toColor(A,1),x.b=this.toColor(A,2),x.a=this.toColor(A,3)),x.attachmentName=b.attachment,x.blendMode=spine.BlendMode[b.blend||"normal"],n.slots[a]=x}var S=t.skins;for(var k in S[0])if(S.hasOwnProperty(k)){var T=S[k],C=new spine.Skin(k);for(var M in T)if(T.hasOwnProperty(M)){var P,O=n.findSlotIndex(M),I=T[M];for(var X in I){console.log(X),!I.hasOwnProperty(X)||(P=this.readAttachment(C,O,X,I[X]))&&C.addAttachment(O,X,P)}}"default"==(n.skins[n.skins.length]=C).name&&(n.defaultSkin=C)}for(a=0,r=this.linkedMeshes.length;a<r;a++){var F=this.linkedMeshes[a];if(!(C=F.skin?n.findSkin(F.skin):n.defaultSkin))throw"Skin not found: "+F.skin;if(!(o=C.getAttachment(F.slotIndex,F.parent)))throw"Parent mesh not found: "+F.parent;F.mesh.setParentMesh(o),F.mesh.updateUVs()}this.linkedMeshes.length=0;var Y,V,D=t.events;for(var U in D){D.hasOwnProperty(U)&&(Y=D[U],(V=new spine.EventData(U)).intValue=Y.int||0,V.floatValue=Y.float||0,V.stringValue=Y.string||null,n.events[n.events.length]=V)}var W=t.animations;for(var B in W)W.hasOwnProperty(B)&&this.readAnimation(B,W[B],n);return n},readAttachment:function(t,e,n,i){n=i.name||n,console.log(n);var a=i.type||"region";"skinnedmesh"==a&&(a="weightedmesh"),a=spine.AttachmentType[a];var r,s=i.path||n,o=this.scale;switch(a){case spine.AttachmentType.region:var h=this.attachmentLoader.newRegionAttachment(t,n,s);if(!h)return null;h.path=s,h.x=(i.x||0)*o,h.y=(i.y||0)*o,h.scaleX=i.hasOwnProperty("scaleX")?i.scaleX:1,h.scaleY=i.hasOwnProperty("scaleY")?i.scaleY:1,h.rotation=i.rotation||0,h.width=(i.width||0)*o,h.height=(i.height||0)*o;var l=i.color;return l&&(h.r=this.toColor(l,0),h.g=this.toColor(l,1),h.b=this.toColor(l,2),h.a=this.toColor(l,3)),h.updateOffset(),h;case spine.AttachmentType.mesh:case spine.AttachmentType.linkedmesh:return(r=this.attachmentLoader.newMeshAttachment(t,n,s))?(r.path=s,(l=i.color)&&(r.r=this.toColor(l,0),r.g=this.toColor(l,1),r.b=this.toColor(l,2),r.a=this.toColor(l,3)),r.width=(i.width||0)*o,r.height=(i.height||0)*o,i.parent?(r.inheritFFD=!i.hasOwnProperty("ffd")||i.ffd,this.linkedMeshes[this.linkedMeshes.length]={mesh:r,skin:i.skin,slotIndex:e,parent:i.parent}):(r.vertices=this.getFloatArray(i,"vertices",o),r.triangles=this.getUint32Array(i,"triangles"),r.regionUVs=this.getFloatArray(i,"uvs",1),r.updateUVs(),r.hullLength=2*(i.hull||0),i.edges&&(r.edges=this.getUint16Array(i,"edges"))),r):null;case spine.AttachmentType.weightedmesh:case spine.AttachmentType.weightedlinkedmesh:if(!(r=this.attachmentLoader.newWeightedMeshAttachment(t,n,s)))return null;if(r.path=s,(l=i.color)&&(r.r=this.toColor(l,0),r.g=this.toColor(l,1),r.b=this.toColor(l,2),r.a=this.toColor(l,3)),r.width=(i.width||0)*o,r.height=(i.height||0)*o,i.parent)r.inheritFFD=!i.hasOwnProperty("ffd")||i.ffd,this.linkedMeshes[this.linkedMeshes.length]={mesh:r,skin:i.skin,slotIndex:e,parent:i.parent};else{for(var p=this.getFloatArray(i,"uvs",1),u=this.getFloatArray(i,"vertices",1),f=new spine.Float32Array(3*p.length*3),d=new spine.Uint32Array(3*p.length),c=0,g=0,m=0,v=u.length;c<v;)for(var y=0|u[c++],w=c+4*(d[g++]=y);c<w;)d[g++]=u[c],f[m++]=u[c+1]*o,f[m++]=u[c+2]*o,f[m++]=u[c+3],c+=4;r.bones=d,r.weights=f,r.triangles=this.getUint32Array(i,"triangles"),r.regionUVs=p,r.updateUVs(),r.hullLength=2*(i.hull||0),i.edges&&(r.edges=this.getUint16Array(i,"edges"))}return r;case spine.AttachmentType.boundingbox:var b=this.attachmentLoader.newBoundingBoxAttachment(t,n),u=i.vertices;b.vertices=new spine.Float32Array(u.length);for(c=0,v=u.length;c<v;c++)b.vertices[c]=u[c]*o;return b}throw"Unknown attachment type: "+a},readAnimation:function(t,e,n){var i=[],a=0,r=e.slots;for(var s in r)if(r.hasOwnProperty(s)){var o=r[s],h=n.findSlotIndex(s);for(var l in o)if(o.hasOwnProperty(l)){var p=o[l];if("color"==l){(W=new spine.ColorTimeline(p.length)).slotIndex=h;for(var u=0,f=0,d=p.length;f<d;f++){var c=(w=p[f]).color,g=this.toColor(c,0),m=this.toColor(c,1),v=this.toColor(c,2),y=this.toColor(c,3);W.setFrame(u,w.time,g,m,v,y),this.readCurve(W,u,w),u++}i[i.length]=W,a=Math.max(a,W.frames[5*W.getFrameCount()-5])}else{if("attachment"!=l)throw"Invalid timeline type for a slot: "+l+" ("+s+")";(W=new spine.AttachmentTimeline(p.length)).slotIndex=h;for(u=0,f=0,d=p.length;f<d;f++){var w=p[f];W.setFrame(u++,w.time,w.name)}i[i.length]=W,a=Math.max(a,W.frames[W.getFrameCount()-1])}}}var b=e.bones;for(var x in b)if(b.hasOwnProperty(x)){var A=n.findBoneIndex(x);if(-1==A)throw"Bone not found: "+x;var S=b[x];for(var l in S)if(S.hasOwnProperty(l)){p=S[l];if("rotate"==l){(W=new spine.RotateTimeline(p.length)).boneIndex=A;for(u=0,f=0,d=p.length;f<d;f++){w=p[f];W.setFrame(u,w.time,w.angle),this.readCurve(W,u,w),u++}i[i.length]=W,a=Math.max(a,W.frames[2*W.getFrameCount()-2])}else{if("translate"!=l&&"scale"!=l)throw"Invalid timeline type for a bone: "+l+" ("+x+")";var k=1;"scale"==l?W=new spine.ScaleTimeline(p.length):(W=new spine.TranslateTimeline(p.length),k=this.scale),W.boneIndex=A;for(u=0,f=0,d=p.length;f<d;f++){var T=((w=p[f]).x||0)*k,C=(w.y||0)*k;W.setFrame(u,w.time,T,C),this.readCurve(W,u,w),u++}i[i.length]=W,a=Math.max(a,W.frames[3*W.getFrameCount()-3])}}}var M=e.ik;for(var P in M)if(M.hasOwnProperty(P)){var O=n.findIkConstraint(P),p=M[P];(W=new spine.IkConstraintTimeline(p.length)).ikConstraintIndex=n.ikConstraints.indexOf(O);for(u=0,f=0,d=p.length;f<d;f++){var I=(w=p[f]).hasOwnProperty("mix")?w.mix:1,X=!w.hasOwnProperty("bendPositive")||w.bendPositive?1:-1;W.setFrame(u,w.time,I,X),this.readCurve(W,u,w),u++}i[i.length]=W,a=Math.max(a,W.frames[3*W.getFrameCount()-3])}var F=e.ffd;for(var Y in F){var V=n.findSkin(Y),o=F[Y];for(s in o){var h=n.findSlotIndex(s),D=o[s];for(var U in D){var p=D[U],W=new spine.FfdTimeline(p.length),B=V.getAttachment(h,U);if(!B)throw"FFD attachment not found: "+U;W.slotIndex=h;for(var E=(W.attachment=B).type==spine.AttachmentType.mesh,R=E?B.vertices.length:B.weights.length/3*2,u=0,f=0,d=p.length;f<d;f++){if((w=p[f]).vertices){var L,N=w.vertices;(L=new spine.Float32Array(R)).length=R;var H=w.offset||0,_=N.length;if(1==this.scale)for(var j=0;j<_;j++)L[j+H]=N[j];else for(j=0;j<_;j++)L[j+H]=N[j]*this.scale;if(E)for(var G=B.vertices,j=0,_=L.length;j<_;j++)L[j]+=G[j]}else E?L=B.vertices:(L=new spine.Float32Array(R)).length=R;W.setFrame(u,w.time,L),this.readCurve(W,u,w),u++}i[i.length]=W,a=Math.max(a,W.frames[W.getFrameCount()-1])}}}var q=e.drawOrder;if(q=q||e.draworder){for(var W=new spine.DrawOrderTimeline(q.length),J=n.slots.length,u=0,f=0,d=q.length;f<d;f++){var K=q[f],$=null;if(K.offsets){for(j=(($=new spine.Uint32Array(J)).length=J)-1;0<=j;j--)$[j]=4294967295;var z=K.offsets,Q=new spine.Uint32Array(J-z.length);Q.length=J-z.length;for(var Z=0,tt=0,j=0,_=z.length;j<_;j++){var et=z[j];if(-1==(h=n.findSlotIndex(et.slot)))throw"Slot not found: "+et.slot;for(;Z!=h;)Q[tt++]=Z++;$[Z+et.offset]=Z++}for(;Z<J;)Q[tt++]=Z++;for(j=J-1;0<=j;j--)4294967295==$[j]&&($[j]=Q[--tt])}W.setFrame(u++,K.time,$)}i[i.length]=W,a=Math.max(a,W.frames[W.getFrameCount()-1])}var nt=e.events;if(nt){for(W=new spine.EventTimeline(nt.length),u=0,f=0,d=nt.length;f<d;f++){var it=nt[f],at=n.findEvent(it.name);if(!at)throw"Event not found: "+it.name;var rt=new spine.Event(it.time,at);rt.intValue=it.hasOwnProperty("int")?it.int:at.intValue,rt.floatValue=it.hasOwnProperty("float")?it.float:at.floatValue,rt.stringValue=it.hasOwnProperty("string")?it.string:at.stringValue,W.setFrame(u++,rt)}i[i.length]=W,a=Math.max(a,W.frames[W.getFrameCount()-1])}n.animations[n.animations.length]=new spine.Animation(t,i,a)},readCurve:function(t,e,n){var i=n.curve;i?"stepped"==i?t.curves.setStepped(e):i instanceof Array&&t.curves.setCurve(e,i[0],i[1],i[2],i[3]):t.curves.setLinear(e)},toColor:function(t,e){if(8!=t.length)throw"Color hexidecimal length must be 8, recieved: "+t;return parseInt(t.substring(2*e,2*e+2),16)/255},getFloatArray:function(t,e,n){var i=t[e],a=new spine.Float32Array(i.length),r=0,s=i.length;if(1==n)for(;r<s;r++)a[r]=i[r];else for(;r<s;r++)a[r]=i[r]*n;return a},getUint32Array:function(t,e){for(var n=t[e],i=new spine.Uint32Array(n.length),a=0,r=n.length;a<r;a++)i[a]=0|n[a];return i},getUint16Array:function(t,e){for(var n=t[e],i=new spine.Uint16Array(n.length),a=0,r=n.length;a<r;a++)i[a]=0|n[a];return i}},spine.Atlas=function(t,e){this.textureLoader=e,this.pages=[],this.regions=[];var n=new spine.AtlasReader(t),i=[];i.length=4;for(var a=null;;){var r,s,o,h,l,p,u=n.readLine();if(null===u)break;(u=n.trim(u)).length?a?((r=new spine.AtlasRegion).name=u,r.page=a,r.rotate="true"==n.readValue(),n.readTuple(i),s=parseInt(i[0]),o=parseInt(i[1]),n.readTuple(i),h=parseInt(i[0]),l=parseInt(i[1]),r.u=s/a.width,r.v=o/a.height,r.rotate?(r.u2=(s+l)/a.width,r.v2=(o+h)/a.height):(r.u2=(s+h)/a.width,r.v2=(o+l)/a.height),r.x=s,r.y=o,r.width=Math.abs(h),r.height=Math.abs(l),4==n.readTuple(i)&&(r.splits=[parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],4==n.readTuple(i)&&(r.pads=[parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],n.readTuple(i))),r.originalWidth=parseInt(i[0]),r.originalHeight=parseInt(i[1]),n.readTuple(i),r.offsetX=parseInt(i[0]),r.offsetY=parseInt(i[1]),r.index=parseInt(n.readValue()),this.regions[this.regions.length]=r):((a=new spine.AtlasPage).name=u,2==n.readTuple(i)&&(a.width=parseInt(i[0]),a.height=parseInt(i[1]),n.readTuple(i)),a.format=spine.Atlas.Format[i[0]],n.readTuple(i),a.minFilter=spine.Atlas.TextureFilter[i[0]],a.magFilter=spine.Atlas.TextureFilter[i[1]],p=n.readValue(),a.uWrap=spine.Atlas.TextureWrap.clampToEdge,a.vWrap=spine.Atlas.TextureWrap.clampToEdge,"x"==p?a.uWrap=spine.Atlas.TextureWrap.repeat:"y"==p?a.vWrap=spine.Atlas.TextureWrap.repeat:"xy"==p&&(a.uWrap=a.vWrap=spine.Atlas.TextureWrap.repeat),e.load(a,u,this),this.pages[this.pages.length]=a):a=null}},spine.Atlas.prototype={findRegion:function(t){for(var e=this.regions,n=0,i=e.length;n<i;n++)if(e[n].name==t)return e[n];return null},dispose:function(){for(var t=this.pages,e=0,n=t.length;e<n;e++)this.textureLoader.unload(t[e].rendererObject)},updateUVs:function(t){for(var e=this.regions,n=0,i=e.length;n<i;n++){var a=e[n];a.page==t&&(a.u=a.x/t.width,a.v=a.y/t.height,a.rotate?(a.u2=(a.x+a.height)/t.width,a.v2=(a.y+a.width)/t.height):(a.u2=(a.x+a.width)/t.width,a.v2=(a.y+a.height)/t.height))}}},spine.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},spine.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},spine.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},spine.AtlasPage=function(){},spine.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},spine.AtlasRegion=function(){},spine.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},spine.AtlasReader=function(t){this.lines=t.split(/\r\n|\r|\n/)},spine.AtlasReader.prototype={index:0,trim:function(t){return t.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw"Invalid line: "+t;return this.trim(t.substring(e+1))},readTuple:function(t){var e=this.readLine(),n=e.indexOf(":");if(-1==n)throw"Invalid line: "+e;for(var i=0,a=n+1;i<3;i++){var r=e.indexOf(",",a);if(-1==r)break;t[i]=this.trim(e.substr(a,r-a)),a=r+1}return t[i]=this.trim(e.substring(a)),i+1}},spine.AtlasAttachmentLoader=function(t){this.atlas=t},spine.AtlasAttachmentLoader.prototype={newRegionAttachment:function(t,e,n){console.log(n);var i=this.atlas.findRegion(n);if(!i)throw"Region not found in atlas: "+n+" (region attachment: "+e+")";var a=new spine.RegionAttachment(e);return a.rendererObject=i,a.setUVs(i.u,i.v,i.u2,i.v2,i.rotate),a.regionOffsetX=i.offsetX,a.regionOffsetY=i.offsetY,a.regionWidth=i.width,a.regionHeight=i.height,a.regionOriginalWidth=i.originalWidth,a.regionOriginalHeight=i.originalHeight,a},newMeshAttachment:function(t,e,n){var i=this.atlas.findRegion(n);if(!i)throw"Region not found in atlas: "+n+" (mesh attachment: "+e+")";var a=new spine.MeshAttachment(e);return a.rendererObject=i,a.regionU=i.u,a.regionV=i.v,a.regionU2=i.u2,a.regionV2=i.v2,a.regionRotate=i.rotate,a.regionOffsetX=i.offsetX,a.regionOffsetY=i.offsetY,a.regionWidth=i.width,a.regionHeight=i.height,a.regionOriginalWidth=i.originalWidth,a.regionOriginalHeight=i.originalHeight,a},newWeightedMeshAttachment:function(t,e,n){var i=this.atlas.findRegion(n);if(!i)throw"Region not found in atlas: "+n+" (weighted mesh attachment: "+e+")";var a=new spine.WeightedMeshAttachment(e);return a.rendererObject=i,a.regionU=i.u,a.regionV=i.v,a.regionU2=i.u2,a.regionV2=i.v2,a.regionRotate=i.rotate,a.regionOffsetX=i.offsetX,a.regionOffsetY=i.offsetY,a.regionWidth=i.width,a.regionHeight=i.height,a.regionOriginalWidth=i.originalWidth,a.regionOriginalHeight=i.originalHeight,a},newBoundingBoxAttachment:function(t,e){return new spine.BoundingBoxAttachment(e)}},spine.SkeletonBounds=function(){this.polygonPool=[],this.polygons=[],this.boundingBoxes=[]},spine.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(t,e){for(var n=t.slots,i=n.length,a=t.x,r=t.y,s=this.boundingBoxes,o=this.polygonPool,h=this.polygons,l=s.length=0,p=h.length;l<p;l++)o[o.length]=h[l];for(l=h.length=0;l<i;l++){var u,f,d=n[l],c=d.attachment;c.type==spine.AttachmentType.boundingbox&&(s[s.length]=c,0<(u=o.length)?(f=o[u-1],o.splice(u-1,1)):f=new spine.Float32Array,(h[h.length]=f).length=c.vertices.length,c.computeWorldVertices(a,r,d.bone,f))}e&&this.aabbCompute()},aabbCompute:function(){for(var t=this.polygons,e=Number.MAX_VALUE,n=Number.MAX_VALUE,i=-Number.MAX_VALUE,a=-Number.MAX_VALUE,r=0,s=t.length;r<s;r++)for(var o=t[r],h=0,l=o.length;h<l;h+=2)var p=o[h],u=o[h+1],e=Math.min(e,p),n=Math.min(n,u),i=Math.max(i,p),a=Math.max(a,u);this.minX=e,this.minY=n,this.maxX=i,this.maxY=a},aabbContainsPoint:function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},aabbIntersectsSegment:function(t,e,n,i){var a=this.minX,r=this.minY,s=this.maxX,o=this.maxY;if(t<=a&&n<=a||e<=r&&i<=r||s<=t&&s<=n||o<=e&&o<=i)return!1;var h=(i-e)/(n-t),l=h*(a-t)+e;if(r<l&&l<o)return!0;if(r<(l=h*(s-t)+e)&&l<o)return!0;var p=(r-e)/h+t;return a<p&&p<s||a<(p=(o-e)/h+t)&&p<s},aabbIntersectsSkeleton:function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},containsPoint:function(t,e){for(var n=this.polygons,i=0,a=n.length;i<a;i++)if(this.polygonContainsPoint(n[i],t,e))return this.boundingBoxes[i];return null},intersectsSegment:function(t,e,n,i){for(var a=this.polygons,r=0,s=a.length;r<s;r++)if(a[r].intersectsSegment(t,e,n,i))return this.boundingBoxes[r];return null},polygonContainsPoint:function(t,e,n){for(var i=t.length,a=i-2,r=!1,s=0;s<i;s+=2){var o,h=t[s+1],l=t[a+1];!(h<n&&n<=l||l<n&&n<=h)||(o=t[s])+(n-h)/(l-h)*(t[a]-o)<e&&(r=!r),a=s}return r},polygonIntersectsSegment:function(t,e,n,i,a){for(var r=t.length,s=e-i,o=n-a,h=e*a-n*i,l=t[r-2],p=t[r-1],u=0;u<r;u+=2){var f=t[u],d=t[u+1],c=l*d-p*f,g=l-f,m=p-d,v=s*m-o*g,y=(h*g-s*c)/v;if((l<=y&&y<=f||f<=y&&y<=l)&&(e<=y&&y<=i||i<=y&&y<=e)){var w=(h*m-o*c)/v;if((p<=w&&w<=d||d<=w&&w<=p)&&(n<=w&&w<=a||a<=w&&w<=n))return!0}l=f,p=d}return!1},getPolygon:function(t){var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}};var PhaserSpine,__extends=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)};!function(s){var i,t=(i=Phaser.Plugin,__extends(e,i),e.prototype.addSpineLoader=function(){Phaser.Loader.prototype.spine=function(t,e,n){var i=this,a=t+"Atlas",r={atlas:a,basePath:""===e.substring(0,e.lastIndexOf("/"))?".":e.substring(0,e.lastIndexOf("/")),variants:void 0};void 0===n?n=[""]:r.variants=n,n.forEach(function(n){i.onFileComplete.add(function(t,e){e===a&&new spine.Atlas(i.game.cache.getText(e),{load:function(t,e){i.image(e,r.basePath+"/"+e.substr(0,e.lastIndexOf("."))+n+".png")}})}),i.text(a,e.substr(0,e.lastIndexOf("."))+n+".atlas")}),this.json(t,e),this.game.cache.addSpine(t,r)}},e.prototype.addSpineFactory=function(){Phaser.GameObjectFactory.prototype.spine=function(t,e,n,i,a){void 0===a&&(a=this.world);var r=new s.Spine(this.game,n,i);return r.setToSetupPose(),r.position.x=t,r.position.y=e,a.add(r)},Phaser.GameObjectCreator.prototype.spine=function(t,e,n,i,a){return new s.Spine(this.game,n,i)}},e.prototype.addSpineCache=function(){Phaser.Cache.prototype.spine={},Phaser.Cache.prototype.addSpine=function(t,e){this.spine[t]=e},Phaser.Cache.prototype.getSpine=function(t){return this.spine.hasOwnProperty(t)||console.warn('Phaser.Cache.getSpine: Key "'+t+'" not found in Cache.'),this.spine[t]}},e);function e(t,e){var n=i.call(this,t,e)||this;return n.addSpineCache(),n.addSpineFactory(),n.addSpineLoader(),n}t.RESOLUTION_REGEXP=/@(.+)x/,s.SpinePlugin=t}(PhaserSpine=PhaserSpine||{}),Phaser.Rope.prototype.postUpdate=function(){},spine.Bone.yDown=!0,function(v){var y,t=(y=Phaser.Group,__extends(e,y),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this.updateTransform===v.Spine.prototype.autoUpdateTransform},set:function(t){this.updateTransform=t?v.Spine.prototype.autoUpdateTransform:PIXI.DisplayObjectContainer.prototype.updateTransform},enumerable:!0,configurable:!0}),e.prototype.getScaleFromVariant=function(t){var e=v.SpinePlugin.RESOLUTION_REGEXP.exec(t);return e?parseFloat(e[1]):1},e.prototype.setTint=function(t){this.globalTint=t;for(var e=this.skeleton.slots,n=0;n<e.length;n++){var i=e[n];i.currentSprite&&(i.currentSprite.tint=t)}},e.prototype.update=function(t){if(void 0!==t){this.state.update(t),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var e=this.skeleton.drawOrder,n=this.skeleton.slots,i=0,a=e.length;i<a;i++)void 0!==e[i].currentSprite&&(this.children[i]=e[i].currentSprite.parent);for(i=0,a=n.length;i<a;i++){var r=n[i],s=r.attachment,o=this.slotContainers[i];if(s){var h,l,p,u,f=s.type;if(f===spine.AttachmentType.region){s.rendererObject&&(r.currentSpriteName&&r.currentSpriteName===s.name||(h=s.rendererObject.name,void 0!==r.currentSprite&&(r.currentSprite.visible=!1),r.sprites=r.sprites||{},void 0!==r.sprites[h]?r.sprites[h].visible=!0:(l=this.createSprite(r,s),o.add(l)),r.currentSprite=r.sprites[h],r.currentSpriteName=h));var d=r.bone;o.position.x=s.x*d.a+s.y*d.b+d.worldX,o.position.y=s.x*d.c+s.y*d.d+d.worldY,o.scale.x=d.getWorldScaleX(),o.scale.y=d.getWorldScaleY(),o.rotation=(d.getWorldRotationX()-s.rotation)*Math.PI/180,d.getWorldScaleY()<0&&(o.scale.y=-o.scale.y),d.getWorldScaleX()<0&&(o.scale.x=-o.scale.x),(d.getWorldScaleY()<0||d.getWorldScaleX()<0)&&(o.rotation=-o.rotation),r.currentSprite.blendMode=r.blendMode,this.globalTint||(r.currentSprite.tint=r.currentSprite.tint=parseInt(Phaser.Color.componentToHex(255*r.r).substring(0,2)+Phaser.Color.componentToHex(255*r.g).substring(0,2)+Phaser.Color.componentToHex(255*r.b).substring(0,2),16))}else{if(f!==spine.AttachmentType.weightedmesh&&f!==spine.AttachmentType.weightedlinkedmesh){o.visible=!1;continue}r.currentMeshName&&r.currentMeshName===s.name||(p=s.name,void 0!==r.currentMesh&&(r.currentMesh.visible=!1),r.meshes=r.meshes||{},void 0!==r.meshes[p]?r.meshes[p].visible=!0:(u=this.createMesh(r,s),o.add(u)),r.currentMesh=r.meshes[p],r.currentMeshName=p),s.computeWorldVertices(r.bone.skeleton.x,r.bone.skeleton.y,r,r.currentMesh.vertices)}o.visible=!0,o.alpha=r.a}else o.visible=!1}}},e.prototype.destroy=function(t,e){y.prototype.destroy.call(this,!0,e)},e.prototype.autoUpdateTransform=function(){var t;e.globalAutoUpdate?(this.lastTime=this.lastTime||Date.now(),t=.001*(Date.now()-this.lastTime),this.lastTime=Date.now(),this.update(t)):this.lastTime=0,PIXI.DisplayObjectContainer.prototype.updateTransform.call(this)},e.prototype.createSprite=function(t,e){var n,i=e.rendererObject,a=i.page.rendererObject,r=new PIXI.Rectangle(i.x,i.y,i.rotate?i.height:i.width,i.rotate?i.width:i.height),s=new PIXI.Texture(a,r),o=new Phaser.Sprite(this.game,0,0,s),h=i.rotate?.5*Math.PI:0;return o.scale.x=i.width/i.originalWidth*e.scaleX/this.imageScale,o.scale.y=i.height/i.originalHeight*e.scaleY/this.imageScale,o.rotation=h,o.anchor.x=(.5*i.originalWidth-i.offsetX)/i.width,o.anchor.y=1-(.5*i.originalHeight-i.offsetY)/i.height,o.alpha=e.a,i.rotate&&(n=o.scale.x,o.scale.x=o.scale.y,o.scale.y=n),t.sprites=t.sprites||{},t.sprites[i.name]=o},e.prototype.createMesh=function(t,e){var n=e.rendererObject.page.rendererObject,i=new PIXI.Texture(n);console.log(Phaser.Rope);var a=new Phaser.Rope(this.game,0,0,i);return a.drawMode=1,a.canvasPadding=1.5,a.vertices=new spine.Float32Array(e.uvs.length),a.uvs=e.uvs,a.indices=e.triangles,a.alpha=e.a,t.meshes=t.meshes||{},t.meshes[e.name]=a},e.prototype.setMixByName=function(t,e,n){this.stateData.setMixByName(t,e,n)},e.prototype.setAnimationByName=function(t,e,n){void 0===n&&(n=!1);var i=this.state.data.skeletonData.findAnimation(e);return i?this.state.setAnimation(t,i,n):(console.warn("Animation not found: "+e),null)},e.prototype.addAnimationByName=function(t,e,n,i){void 0===n&&(n=!1),void 0===i&&(i=0);var a=this.state.data.skeletonData.findAnimation(e);return a?this.state.addAnimation(t,a,n,i):(console.warn("Animation not found: "+e),null)},e.prototype.getCurrentAnimationForTrack=function(t){return this.state.tracks[t]&&this.state.tracks[t].animation?this.state.tracks[t].animation.name:(console.warn("No animation found on track index: ",t),"")},e.prototype.setSkinByName=function(t){var e=this.skeleton.data.findSkin(t);e?this.skeleton.setSkin(e):console.warn("Skin not found: "+t)},e.prototype.setSkin=function(t){this.skeleton.setSkin(t)},e.prototype.setToSetupPose=function(){this.skeleton.setToSetupPose()},e.prototype.createCombinedSkin=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(0!==e.length){for(var i=new spine.Skin(t),a=0;a<e.length;a++){var r=e[a],s=this.skeleton.data.findSkin(r);if(!s)return void console.warn("Skin not found: "+r);for(var o in s.attachments){var h=o.split(":"),l=h[0],p=h[1],u=s.attachments[o];if(void 0===l||void 0===p)return void console.warn("something went wrong with reading the attachments index and/or name");void 0===i.getAttachment(l,p)?i.addAttachment(l,p,u):console.warn("Found double attachment for: "+r+". Skipping")}}return this.skeleton.data.skins.push(i),i}console.warn("Unable to combine skins when no skins are passed...")},e);function e(t,e,n){var i=y.call(this,t)||this;i.imageScale=1;var a=i.game.cache.getSpine(e);void 0!==n&&-1!==a.variants.indexOf(n)?i.imageScale=i.getScaleFromVariant(n):a.variants&&1<=a.variants.length&&(i.imageScale=i.getScaleFromVariant(a.variants[0]));var r=new v.SpineTextureLoader(t),s=new spine.Atlas(t.cache.getText(a.atlas),r),o=new spine.AtlasAttachmentLoader(s),h=new spine.SkeletonJson(o);if(i.skeletonData=h.readSkeletonData(t.cache.getJSON(e)),!i.skeletonData)throw new Error("Spine data must be preloaded using Loader.spine");i.onEvent=new Phaser.Signal,i.onComplete=new Phaser.Signal,i.onEnd=new Phaser.Signal,i.skeleton=new spine.Skeleton(i.skeletonData),i.skeleton.updateWorldTransform(),i.stateData=new spine.AnimationStateData(i.skeletonData),i.state=new spine.AnimationState(i.stateData),i.state.onEvent=i.onEvent.dispatch.bind(i.onEvent),i.state.onComplete=i.onComplete.dispatch.bind(i.onComplete),i.state.onEnd=i.onEnd.dispatch.bind(i.onEnd),i.slotContainers=[];for(var l=0,p=i.skeleton.slots.length;l<p;l++){var u=i.skeleton.slots[l],f=u.attachment,d=new Phaser.Group(t);if(i.slotContainers.push(d),i.add(d),f instanceof spine.RegionAttachment){var c=f.rendererObject.name,g=i.createSprite(u,f);u.currentSprite=g,u.currentSpriteName=c,d.add(g)}else{if(!(f instanceof spine.WeightedMeshAttachment))continue;var m=i.createMesh(u,f);u.currentMesh=m,u.currentMeshName=f.name,d.add(m)}}return i.autoUpdate=!0,i}t.globalAutoUpdate=!0,v.Spine=t}(PhaserSpine=PhaserSpine||{}),(PhaserSpine||(PhaserSpine={})).SpineTextureLoader=function(t){this.load=function(t,e,n){var i=this.game.make.image(0,0,e);t.rendererObject=i.texture.baseTexture},this.unload=function(t){t.destroy()},this.game=t};