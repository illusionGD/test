"use strict";var screenW=parseInt(window.getComputedStyle(document.getElementById("game")).width),screenH=document.documentElement.clientHeight,keyMap={startBgImg:"startBgImg",playBgImg:"playBgImg",joystick:"joystick",player:"player",playerBullet1:"playerBullet1",enemy:"enemy",popBgImg:"popBgImg",btnClose:"btnClose",gun:"gun",pet:"pet",collide:"collide",knife:"knife",knifeRotation:"skl4_9_path",audioBg:"audioBg",audioFire:"audioFire",audioTornado:"audioTornado",audioHit:"audioHit",audioArrow:"audioArrow",audioKnife:"audioKnife",topTimeBg:"topTimeBg",tornado:"tornado",fireBall:"fireBall",tornadoRotation:"skl7_5_target_1"},game=new Phaser.Game(screenW,screenH,Phaser.CANVAS,"game"),bootState=function(){this.preload=function(){game.load.image(keyMap.startBgImg,"https://ressa-download.vsplay.com/eaysfj/tryNowGame/assets/images/bg.jpg")},this.create=function(){game.state.start("preloadState")}},preloadState=function(){var t,a;function e(e){t.beginFill(16777215),t.drawRect(10,game.world.centerY,game.world.width*(e/100)-20,10),a.text="".concat(e,"%")}this.preload=function(){game.add.image(0,0,keyMap.startBgImg),t=game.add.graphics(),a=game.add.text(game.world.centerX,game.world.centerY+50,"0%",{fill:"#fff"}),game.load.audio(keyMap.audioBg,"https://ressa-download.vsplay.com/eaysfj/tryNowGame/assets/audio/audio_bg.mp3"),game.load.audio(keyMap.audioFire,"https://ressa-download.vsplay.com/eaysfj/tryNowGame/assets/audio/audio_fire.mp3"),game.load.audio(keyMap.audioKnife,"https://ressa-download.vsplay.com/eaysfj/tryNowGame/assets/audio/audio_knife.mp3"),game.load.audio(keyMap.audioHit,"https://ressa-download.vsplay.com/eaysfj/tryNowGame/assets/audio/audio_hit.mp3"),game.load.audio(keyMap.audioTornado,"https://ressa-download.vsplay.com/eaysfj/tryNowGame/assets/audio/audio_tornado.mp3"),game.load.image(keyMap.playerBullet1,"https://ressa-download.vsplay.com/eaysfj/tryNowGame/assets/images/arrow.png"),game.load.image(keyMap.topTimeBg,"https://ressa-download.vsplay.com/eaysfj/tryNowGame/assets/images/top_time.png"),game.load.image(keyMap.collide,"https://ressa-download.vsplay.com/eaysfj/tryNowGame/assets/images/collide.png"),game.load.spritesheet(keyMap.gun,"https://ressa-download.vsplay.com/eaysfj/tryNowGame/assets/images/arrow.png"),game.load.spritesheet(keyMap.pet,"https://ressa-download.vsplay.com/eaysfj/tryNowGame/assets/images/pet.png",131,151,2),game.load.spritesheet(keyMap.enemy,"https://ressa-download.vsplay.com/eaysfj/tryNowGame/assets/images/enemy.png",48,61,4),game.load.spritesheet(keyMap.fireBall,"https://ressa-download.vsplay.com/eaysfj/tryNowGame/assets/images/fire_ball1.png",856,733,4),game.load.spritesheet(keyMap.knife,"https://ressa-download.vsplay.com/eaysfj/tryNowGame/assets/images/knife.png",145,144,6),game.load.spritesheet(keyMap.tornado,"https://ressa-download.vsplay.com/eaysfj/tryNowGame/assets/images/tornado.png",289,213,20),game.load.spritesheet(keyMap.player,"https://ressa-download.vsplay.com/eaysfj/tryNowGame/assets/images/role.png",40,64,2),game.load.atlas(keyMap.joystick,"https://ressa-download.vsplay.com/eaysfj/tryNowGame/assets/images/joystick.png","https://ressa-download.vsplay.com/eaysfj/tryNowGame/assets/json/joystick.json"),game.load.onFileComplete.add(e)},this.create=function(){game.state.start("gameStartState")}},gameStartState=function(){function e(){game.state.start("gamePlayState"),document.querySelector(".btns").style.display="none"}function t(){document.querySelector(".options-pop").style.display="flex"}this.preload=function(){game.add.image(0,0,keyMap.startBgImg)},this.create=function(){document.querySelector(".btns").style.display="block",document.querySelector(".btn-start").addEventListener("click",e),document.querySelector(".btn-config").addEventListener("click",t)}};function initGameConfig(){var t=getConfig("baseConfig"),a=getConfig("roleConfig"),o=getConfig("tornadoConfig"),n=getConfig("fireConfig"),m=getConfig("knifeConfig"),e=getConfig("enemyConfig"),s=getConfig("enemyConfig2"),d=getConfig("enemyConfig3"),i=document.querySelectorAll(".base-options input"),r=document.querySelectorAll(".role-options input"),l=document.querySelectorAll(".tornado-options input"),u=document.querySelectorAll(".fire-options input"),c=document.querySelectorAll(".knife-options input");i.forEach(function(e){e.setAttribute("value",t[e.getAttribute("id")]||0)}),r.forEach(function(e){e.setAttribute("value",a[e.getAttribute("id")]||0)}),l.forEach(function(e){e.setAttribute("value",o[e.getAttribute("id")]||0)}),u.forEach(function(e){e.setAttribute("value",n[e.getAttribute("id")]||0)}),c.forEach(function(e){e.setAttribute("value",m[e.getAttribute("id")]||0)}),document.getElementById("enemyMoveSpeed").value=e.moveSpeed,document.getElementById("enemyCreateNum").value=e.createNum,document.getElementById("enemyCreateDis").value=e.createDis,document.getElementById("enemyMaxCount").value=e.maxCount,document.getElementById("createScope").value=e.createScope||2,document.getElementById("juryTime").value=e.juryTime||500,document.getElementById("deadTime").value=e.deadTime||200,document.getElementById("deadDis").value=e.deadDis||4,document.getElementById("enemyMoveSpeed2").value=s.moveSpeed,document.getElementById("enemyCreateNum2").value=s.createNum,document.getElementById("enemyCreateDis2").value=s.createDis,document.getElementById("enemyLife2").value=s.life,document.getElementById("enemyMoveSpeed3").value=d.moveSpeed,document.getElementById("enemyCreateNum3").value=d.createNum,document.getElementById("enemyCreateDis3").value=d.createDis,document.getElementById("enemyLife3").value=d.life}game.state.add("bootState",bootState),game.state.add("preloadState",preloadState),game.state.add("gameStartState",gameStartState),game.state.add("gamePlayState",gamePlayState),game.state.start("bootState",preloadState),initGameConfig(),document.querySelector(".config-confirm").addEventListener("click",function(){var e=document.querySelectorAll(".base-options input"),t=document.querySelectorAll(".role-options input"),a=document.querySelectorAll(".tornado-options input"),o=document.querySelectorAll(".fire-options input"),n=document.querySelectorAll(".knife-options input"),m={};e.forEach(function(e){m[e.getAttribute("id")]=Number(e.value)||0});var s={};t.forEach(function(e){s[e.getAttribute("id")]=Number(e.value)||0});var d={};a.forEach(function(e){d[e.getAttribute("id")]=Number(e.value)||0});var i={};o.forEach(function(e){i[e.getAttribute("id")]=Number(e.value)||0});var r={};n.forEach(function(e){r[e.getAttribute("id")]=Number(e.value)||0});var l={moveSpeed:Number(document.getElementById("enemyMoveSpeed").value)||100,createDis:Number(document.getElementById("enemyCreateDis").value)||800,createNum:Number(document.getElementById("enemyCreateNum").value)||1,maxCount:Number(document.getElementById("enemyMaxCount").value)||80,life:Number(document.getElementById("enemyLife").value)||1,juryTime:Number(document.getElementById("juryTime").value)||500,deadTime:Number(document.getElementById("deadTime").value)||200,deadDis:Number(document.getElementById("deadDis").value)||4,createScope:Number(document.getElementById("createScope").value)||2},u={moveSpeed:Number(document.getElementById("enemyMoveSpeed2").value)||100,createDis:Number(document.getElementById("enemyCreateDis2").value)||800,createNum:Number(document.getElementById("enemyCreateNum2").value)||1,life:Number(document.getElementById("enemyLife2").value)||1},c={moveSpeed:Number(document.getElementById("enemyMoveSpeed3").value)||100,createDis:Number(document.getElementById("enemyCreateDis3").value)||800,createNum:Number(document.getElementById("enemyCreateNum3").value)||1,life:Number(document.getElementById("enemyLife3").value)||1};setLocalStorage("baseConfig",m),setLocalStorage("roleConfig",s),setLocalStorage("tornadoConfig",d),setLocalStorage("fireConfig",i),setLocalStorage("knifeConfig",r),setLocalStorage("enemyConfig",l),setLocalStorage("enemyConfig2",u),setLocalStorage("enemyConfig3",c),document.querySelector(".options-pop").style.display="none"}),document.querySelector(".options-pop").addEventListener("click",function(){document.querySelector(".options-pop").style.display="none"}),document.querySelector(".options-pop .pop-content").addEventListener("click",function(e){e.stopPropagation()});