"use strict";var gameStartState=function(){var t,a,i,r,n=30,m=!1,o=!1;(new Date).getTime();function s(e,a){d(e)}function c(e,a){a.kill(),d(e)}function l(e,a){t.injury(),a.kill()}function p(e,a){d(e)}function d(e){e.kill(),0}function u(){var e;0!==n?(e=10<=n-1?--n:"0"+--n,a.text="00:".concat(e)):game.time.events.remove(i)}this.create=function(){game.add.tileSprite(0,0,1920,1920,keyMap.startBgImg),game.physics.startSystem(Phaser.Physics.ARCADE),t=new Player,game.camera.follow(t.player),game.world.setBounds(0,0,rem2px(19.2),rem2px(19.2)),t.addPet(),enemies=new EnemyFactory,enemies.init(),(r=game.add.image(0,0,keyMap.topTimeBg)).fixedToCamera=!0;var e=scaleAdaptation(750);r.scale.set(e,e),i=game.time.events.repeat(+Phaser.Timer.SECOND,30,u,this),(a=game.add.text(game.camera.width/2,rem2px(1.05),"00:".concat(n),{font:"bold ".concat(rem2px(.4),"px Arial"),fill:"#fff"})).stroke="#000",a.strokeThickness=5,a.fixedToCamera=!0,a.anchor.set(.5,.5)},this.update=function(){if(m||!t.life)return m=!0,t.stop(),enemies.stop(),i.timer.paused=!0,void(o=!0);var e,a;o||(t.run(),t.petFire(),t.fire(),enemies.move(t.player.x,t.player.y),e=game.camera.position.x-game.camera.width/2+Math.random()*game.camera.width,a=game.camera.position.y-game.camera.height/2+Math.random()*game.camera.height,enemies.createEnemy(e,a),game.physics.arcade.overlap(enemies.enemyGroup,t.bullets,c,null,this),game.physics.arcade.overlap(enemies.enemyGroup,t.player,l,null,this),game.physics.arcade.overlap(enemies.enemyGroup,t.tornados,p,null,this),game.physics.arcade.overlap(enemies.enemyGroup,t.pet.fireGroup,s,null,this))},this.render=function(){game.debug.body(t.player),t.bullets.forEachAlive(function(e){game.debug.body(e)}),enemies.enemyGroup.forEachAlive(function(e){game.debug.body(e)})}};