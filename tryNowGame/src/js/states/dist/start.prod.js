"use strict";var gameStartState=function(){var r,a,n,t,i=30,m=!1,o=!1;(new Date).getTime();function s(e,a){d(e)}function c(e,a){a.kill(),d(e)}function l(e,a){r.injury(),a.kill()}function p(e,a){d(e)}function d(e){e.kill(),0}function u(){var e;0!==i?(e=10<=i-1?--i:"0"+--i,a.text="00:".concat(e)):game.time.events.remove(n)}this.create=function(){game.add.tileSprite(0,0,1920,1920,keyMap.startBgImg),game.physics.startSystem(Phaser.Physics.ARCADE),r=new Player,game.camera.follow(r.player),game.world.setBounds(0,0,rem2px(19.2),rem2px(19.2)),r.addPet(),enemies=new EnemyFactory,enemies.init(),(t=game.add.image(0,0,keyMap.topTimeBg)).fixedToCamera=!0;var e=scaleAdaptation(750);t.scale.set(e,e),n=game.time.events.repeat(+Phaser.Timer.SECOND,30,u,this),(a=game.add.text(game.camera.width/2,rem2px(1.05),"00:".concat(i),{font:"bold ".concat(rem2px(.4),"px Arial"),fill:"#fff"})).stroke="#000",a.strokeThickness=5,a.fixedToCamera=!0,a.anchor.set(.5,.5)},this.update=function(){if(m||!r.life)return m=!0,r.stop(),enemies.stop(),n.timer.paused=!0,void(o=!0);var t,i,e,a;o||(r.run(),t=null,i=game.camera.width,enemies.enemyGroup.forEachAlive(function(e){var a=game.physics.arcade.distanceToPointer(r.player,e.pointer);a<i&&(i=a,t=e)}),r.fire(t),enemies.move(r.player.x,r.player.y),e=game.camera.position.x-game.camera.width/2+Math.random()*game.camera.width,a=game.camera.position.y-game.camera.height/2+Math.random()*game.camera.height,enemies.createEnemy(e,a),game.physics.arcade.overlap(enemies.enemyGroup,r.bullets,c,null,this),game.physics.arcade.overlap(enemies.enemyGroup,r.player,l,null,this),game.physics.arcade.overlap(enemies.enemyGroup,r.tornados,p,null,this),game.physics.arcade.overlap(enemies.enemyGroup,r.pet.fireGroup,s,null,this))},this.render=function(){game.debug.body(r.player),r.bullets.forEachAlive(function(e){game.debug.body(e)}),enemies.enemyGroup.forEachAlive(function(e){game.debug.body(e)})}};