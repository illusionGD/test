"use strict";var gameStartState=function(){var i,a,n,t,r=30,m=!1,s=!1;(new Date).getTime();function o(e,a){a.kill(),p(e)}function c(e,a){a.isDead||i.injury(),p(a)}function p(e){e.DeadTween.start(),0}function l(){var e;0!==r?(e=10<=r-1?--r:"0"+--r,a.text="00:".concat(e)):game.time.events.remove(n)}this.create=function(){game.add.tileSprite(0,0,1920,1920,keyMap.startBgImg),game.physics.startSystem(Phaser.Physics.ARCADE),i=new Player,game.camera.follow(i.player),game.world.setBounds(0,0,rem2px(19.2),rem2px(19.2)),i.addPet(),enemies=new EnemyFactory,enemies.init(),(t=game.add.image(0,0,keyMap.topTimeBg)).fixedToCamera=!0;var e=scaleAdaptation(750);t.scale.set(e,e),n=game.time.events.repeat(+Phaser.Timer.SECOND,30,l,this),(a=game.add.text(game.camera.width/2,rem2px(1.05),"00:".concat(r),{font:"bold ".concat(rem2px(.4),"px Arial"),fill:"#fff"})).stroke="#000",a.strokeThickness=5,a.fixedToCamera=!0,a.anchor.set(.5,.5)},this.update=function(){if(m||!i.life)return m=!0,i.stop(),enemies.stop(),n.timer.paused=!0,void(s=!0);var t,r,e,a;s||(i.run(),t=null,r=game.camera.width,enemies.enemyGroup.forEachAlive(function(e){var a;e.isDead||(a=game.physics.arcade.distanceToPointer(i.player,e.pointer))<r&&(r=a,t=e)}),i.fire(t),i.tornadosRotate(),enemies.move(i.player.x,i.player.y),e=game.camera.position.x-game.camera.width/2+Math.random()*game.camera.width,a=game.camera.position.y-game.camera.height/2+Math.random()*game.camera.height,enemies.createEnemy(e,a),game.physics.arcade.overlap(enemies.enemyGroup,i.bullets,o,null,this),game.physics.arcade.overlap(enemies.enemyGroup,i.player,c,null,this),game.physics.arcade.overlap(enemies.enemyGroup,i.tornados,p,null,this),game.physics.arcade.overlap(enemies.enemyGroup,i.pet.fireGroup,p,null,this),game.physics.arcade.overlap(enemies.enemyGroup,i.KnifeGroup,p,null,this))},this.render=function(){game.debug.body(i.player),i.bullets.forEachAlive(function(e){game.debug.body(e)}),i.KnifeGroup.forEach(function(e){game.debug.body(e)})}};